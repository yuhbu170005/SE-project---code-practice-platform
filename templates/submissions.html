{% extends "base.html" %} {% block title %}My Submissions - LiteCode{% endblock
%} {% block content %}
<div class="container mt-5">
  <h2 class="mb-4"><i class="fas fa-list me-2"></i>My Submissions</h2>

  {% if submissions %}
  <div class="table-responsive">
    <table class="table table-hover table-striped">
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>Problem</th>
          <th>Status</th>
          <th>Submitted At</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for submission in submissions %}
        <tr>
          <td>
            {{ (pagination.page - 1) * pagination.per_page + loop.index }}
          </td>
          <td>
            <a
              href="{{ url_for('problem.problem_detail', slug=submission.slug) }}"
              class="text-decoration-none"
            >
              {{ submission.title }}
            </a>
          </td>
          <td>
            {% if submission.status == 'Accepted' %}
            <span class="badge bg-success"
              ><i class="fas fa-check"></i> Accepted</span
            >
            {% elif submission.status == 'Wrong Answer' %}
            <span class="badge bg-danger"
              ><i class="fas fa-times"></i> Wrong Answer</span
            >
            {% elif submission.status == 'Runtime Error' %}
            <span class="badge bg-danger"
              ><i class="fas fa-exclamation-triangle"></i> Runtime Error</span
            >
            {% elif submission.status == 'Compilation Error' %}
            <span class="badge bg-danger"
              ><i class="fas fa-bug"></i> Compilation Error</span
            >
            {% elif submission.status == 'Time Limit Exceeded' %}
            <span class="badge bg-warning text-dark"
              ><i class="fas fa-hourglass-end"></i> TLE</span
            >
            {% elif submission.status == 'Memory Limit Exceeded' %}
            <span class="badge bg-warning text-dark"
              ><i class="fas fa-memory"></i> MLE</span
            >
            {% else %}
            <span class="badge bg-secondary">{{ submission.status }}</span>
            {% endif %}
          </td>
          <td>
            {{ submission.submitted_at.strftime('%Y-%m-%d %H:%M:%S') if
            submission.submitted_at else 'N/A' }}
          </td>
          <td>
            <a
              href="{{ url_for('submission.view_submission', submission_id=submission.submission_id) }}"
              class="btn btn-sm btn-primary"
            >
              <i class="fas fa-eye"></i> View
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  {% if pagination and pagination.total_pages > 1 %}
  <nav
    aria-label="Submissions pagination"
    class="d-flex justify-content-center mt-4"
  >
    <ul class="pagination">
      <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
        <a
          class="page-link"
          href="{{ url_for('submission.list_submissions', page=pagination.page-1) }}"
          tabindex="-1"
          >Previous</a
        >
      </li>

      {% set start = pagination.page - 2 if pagination.page - 2 > 1 else 1 %} {%
      set end = pagination.page + 2 if pagination.page + 2 <
      pagination.total_pages else pagination.total_pages %} {% if start > 1 %}
      <li class="page-item">
        <a
          class="page-link"
          href="{{ url_for('submission.list_submissions', page=1) }}"
          >1</a
        >
      </li>
      {% if start > 2 %}
      <li class="page-item disabled"><span class="page-link">…</span></li>
      {% endif %} {% endif %} {% for pnum in range(start, end + 1) %}
      <li class="page-item {% if pnum == pagination.page %}active{% endif %}">
        <a
          class="page-link"
          href="{{ url_for('submission.list_submissions', page=pnum) }}"
          >{{ pnum }}</a
        >
      </li>
      {% endfor %} {% if end < pagination.total_pages %} {% if end <
      pagination.total_pages - 1 %}
      <li class="page-item disabled"><span class="page-link">…</span></li>
      {% endif %}
      <li class="page-item">
        <a
          class="page-link"
          href="{{ url_for('submission.list_submissions', page=pagination.total_pages) }}"
          >{{ pagination.total_pages }}</a
        >
      </li>
      {% endif %}

      <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
        <a
          class="page-link"
          href="{{ url_for('submission.list_submissions', page=pagination.page+1) }}"
          >Next</a
        >
      </li>
    </ul>
  </nav>
  {% endif %} {% else %}
  <div class="alert alert-info text-center">
    <i class="fas fa-inbox me-2"></i>
    No submissions yet.
    <a href="{{ url_for('problem.list_problems') }}">Start solving problems!</a>
  </div>
  {% endif %}
</div>
{% endblock %} {% block extra_css %}
<style>
  .table-hover tbody tr:hover {
    background-color: #f5f5f5;
  }
</style>
{% endblock %}
