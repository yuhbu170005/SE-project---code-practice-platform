<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}LiteCode{% endblock %}</title>

    <link rel="icon" href="/static/images/logo.png" type="image/png" />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />

    <!-- Custom CSS - SỬA LỖI Ở ĐÂY -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />

    {% block extra_css %}{% endblock %}
  </head>

  <body class="{% block body_class %}{% endblock %}">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg bg-white navbar-custom">
      <div class="container-fluid">
        <!-- Logo -->
        <a href="{{ url_for('main.home') }}" class="nav-brand navbar-brand">
          <img
            src="/static/images/logo.png"
            alt="LiteCode Logo"
            class="logo-img me-2"
          />
          LiteCode
        </a>

        <!-- Mobile Toggle Button -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarContent"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Nav Content -->
        <div class="collapse navbar-collapse" id="navbarContent">
          <!-- Nav Links -->
          <div class="navbar-nav me-auto nav-links">
            <a href="{{ url_for('main.home') }}" class="nav-link">Home</a>
            <a href="{{ url_for('problem.list_problems') }}" class="nav-link"
              >Problems</a
            >
            {% if session.user_id %}
            <a
              href="{{ url_for('submission.list_submissions') }}"
              class="nav-link"
            >
              Submissions
            </a>
            {% endif %}
          </div>

          <!-- Auth Section -->
          <div class="d-flex align-items-center nav-auth">
            {% if session.user_id %}
            <span class="me-3 user-info">
              <i class="fas fa-user-circle"></i> {{ session.username }}
            </span>

            <a
              href="{{ url_for('auth.logout') }}"
              class="btn btn-outline-danger btn-sm"
            >
              <i class="fas fa-sign-out-alt"></i> Logout
            </a>
            {% else %}

            <a
              href="{{ url_for('auth.view_login') }}"
              class="btn btn-outline-primary btn-sm me-2"
            >
              Login
            </a>
            <a
              href="{{ url_for('auth.view_signup') }}"
              class="btn btn-primary btn-sm"
            >
              Sign Up
            </a>
            {% endif %}
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    {% block layout_wrapper %}
    <div class="container mt-4">{% block content %}{% endblock %}</div>
    {% endblock %}

    <!-- Footer -->
    <footer id="main-footer" class="mt-auto py-3 bg-light text-center">
      <p class="mb-0 text-muted">
        &copy; 2025 Code Practice Platform. Software Engineering Project.
      </p>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Custom JS - SỬA LỖI Ở ĐÂY -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

    {% block extra_js %}{% endblock %}
  </body>
</html>
